<!DOCTYPE html>
<html class="wide wow-animation" lang="en">
  <head>
    <title>CourseEbook</title>
    <meta name="format-detection" content="telephone=no">
    <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta charset="utf-8">
    <link rel="icon" sizes="512x512" href="images/CourseEbookIcon.png" type="image/x-icon">
    <!-- Stylesheets-->
    <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Poppins:400,500,600%7CTeko:300,400,500%7CMaven+Pro:500">
    <link rel="stylesheet" href="css/bootstrap.css">
    <link rel="stylesheet" href="css/fonts.css">
    <link rel="stylesheet" href="css/style.css">
    <style>.ie-panel{display: none;background: #212121;padding: 10px 0;box-shadow: 3px 3px 5px 0 rgba(0,0,0,.3);clear: both;text-align:center;position: relative;z-index: 1;} html.ie-10 .ie-panel, html.lt-ie-10 .ie-panel {display: block;}</style>
    <!-- Parse SDK -->
    <script src="https://npmcdn.com/parse/dist/parse.min.js"></script>
  </head>
  <body>
    <div class="ie-panel"><a href="http://windows.microsoft.com/en-US/internet-explorer/"><img src="images/ie8-panel/warning_bar_0000_us.jpg" height="42" width="820" alt="You are using an outdated browser. For a faster, safer browsing experience, upgrade for free today."></a></div>
    <div class="preloader">
      <div class="preloader-body">
        <div class="cssload-container"><span></span><span></span><span></span><span></span></div>
      </div>
    </div>
    <div class="page">
      <div id="home">
        <!-- Page Header-->
        <header class="section page-header">
          <div class="rd-navbar-wrap">
            <div class="rd-navbar-brand"><a class="brand" href="courseebook.html"><img src="images/CourseEbook.png" alt="" width="400" height="50"/></a></div>
          </div>
        </header>

        <!-- Swiper-->
        <section class="section swiper-container swiper-slider swiper-slider-classic" data-loop="true" data-autoplay="4859" data-simulate-touch="true" data-direction="vertical" data-nav="false">
          <div class="swiper-wrapper text-center">
            <div class="swiper-slide" data-slide-bg="images/slider-1-slide-2-1770x742.jpg">
              <div class="swiper-slide-caption section-md">
                <div class="container">
                  <h1 data-caption-animate="fadeInLeft" data-caption-delay="0">Interactive Course eBook</h1>
                  <p class="text-width-large" data-caption-animate="fadeInRight" data-caption-delay="100">
                    Experience a new era of learning with our interactive course ebook that brings lessons to life.
                  </p>
                  <a class="button button-primary button-ujarak" href="#authModal" data-toggle="modal" data-caption-animate="fadeInUp" data-caption-delay="200">Get Started</a>
                </div>
              </div>
            </div>
            <!-- Other slides remain unchanged -->
          </div>
          <div class="swiper-pagination__module">
            <div class="swiper-pagination__fraction">
              <span class="swiper-pagination__fraction-index">00</span>
              <span class="swiper-pagination__fraction-divider">/</span>
              <span class="swiper-pagination__fraction-count">00</span>
            </div>
            <div class="swiper-pagination__divider"></div>
            <div class="swiper-pagination"></div>
          </div>
        </section>
      </div>

      <!-- Auth Modal -->
      <div class="modal fade" id="authModal">
        <span class="close-btn" id="closeModal">&times;</span>
        <div class="modal-content">
          <!-- LOGIN FORM -->
          <form id="loginForm" class="modal-body active">
            <h2 class="modal-title">Login</h2>
            <div class="social-login">
              <button class="button button-google" type="button">Continue with Google</button>
            </div>
            <input 
              type="email" 
              id="loginEmail" 
              class="form-control" 
              placeholder="Email" 
              required
            /><br>
            <input 
              type="password" 
              id="loginPassword" 
              class="form-control" 
              placeholder="Password" 
              required
            /><br>
            <button class="button button-primary" type="submit">Login</button>
            <p>Don't have an account? <span id="showSignup" class="link-classic">Sign Up</span></p>
            <div id="loginError" style="color: red; display: none;"></div>
          </form>

          <!-- SIGNUP FORM -->
          <form id="signupForm" class="modal-body hidden">
            <h2 class="modal-title">Sign Up</h2>
            <div class="social-login">
              <button class="button button-google" type="button">Continue with Google</button>
              <button class="button button-apple" type="button">Sign in with Apple</button>
            </div>
            <input 
              type="text" 
              id="signinName" 
              class="form-control" 
              placeholder="Name"
            /><br>
            <input 
              type="email" 
              id="signinEmail" 
              class="form-control" 
              placeholder="Email" 
              required
            /><br>
            <input 
              type="password" 
              id="signPassword" 
              class="form-control" 
              placeholder="Password" 
              required
            /><br>
            <button class="button button-primary" type="submit">Sign Up</button>
            <p>Already have an account? <span id="showLogin" class="link-classic">Login</span></p>
            <div id="signupError" style="color: red; display: none;"></div>
          </form>
        </div>
      </div>
    </div>

    <!-- Global Mailform Output-->
    <div class="snackbars" id="form-output-global"></div>
    <!-- Javascript-->
    <script src="js/core.min.js"></script>
    <script src="js/script.js"></script>
    <script>
  // Initialize Parse
   Parse.initialize("OzSePUQdIYYIq2v0vMjy4Cg2AtIw95D5dp12OG2N", "6ZcfT4re40IfpqORCKy2mLXl3d5NYuFQJIDdp1iT"); // Replace with your Back4App keys
    Parse.serverURL = "https://parseapi.back4app.com/";

  // Modal toggle logic
  const loginForm = document.getElementById("loginForm");
  const signupForm = document.getElementById("signupForm");
  const showSignup = document.getElementById("showSignup");
  const showLogin = document.getElementById("showLogin");
  const closeModal = document.getElementById("closeModal");
  const authModal = document.getElementById("authModal");

  showSignup.addEventListener("click", () => {
    loginForm.classList.remove("active");
    loginForm.classList.add("hidden");
    signupForm.classList.remove("hidden");
    signupForm.classList.add("active");
  });

  showLogin.addEventListener("click", () => {
    signupForm.classList.remove("active");
    signupForm.classList.add("hidden");
    loginForm.classList.remove("hidden");
    loginForm.classList.add("active");
  });

  closeModal.addEventListener("click", () => {
    authModal.classList.remove("show");
    authModal.style.display = "none";
  });

  // Handle Login
  loginForm.addEventListener("submit", async (e) => {
    e.preventDefault(); // Prevent default form submission
    const email = document.getElementById("loginEmail").value.trim();
    const password = document.getElementById("loginPassword").value.trim();
    const errorDiv = document.getElementById("loginError");

    console.log("Login attempt with:", email, password); // Debug log

    try {
      const user = await Parse.User.logIn(email, password);
      console.log("Login successful, user:", user); // Confirm login worked
      errorDiv.style.display = "none"; // Hide any previous errors
      authModal.style.display = "none"; // Close modal
      window.location.href = "home.html"; // Redirect
    } catch (error) {
      console.error("Login error:", error); // Log the exact error
      errorDiv.style.display = "block";
      errorDiv.textContent = "Login failed: " + error.message;
    }
  });

  // Handle Signup (unchanged, since it works)
  signupForm.addEventListener("submit", async (e) => {
    e.preventDefault();
    const name = document.getElementById("signinName").value.trim();
    const email = document.getElementById("signinEmail").value.trim();
    const password = document.getElementById("signPassword").value.trim();
    const errorDiv = document.getElementById("signupError");

    const user = new Parse.User();
    user.set("username", email); // Parse uses 'username' for login
    user.set("email", email);
    user.set("password", password);
    user.set("name", name);

    try {
      await user.signUp();
      console.log("User signed up:", user);
      await Parse.User.logIn(email, password);
      window.location.href = "home.html";
    } catch (error) {
      errorDiv.style.display = "block";
      errorDiv.textContent = "Signup failed: " + error.message;
    }
  });
</script>
  </body>
</html>
